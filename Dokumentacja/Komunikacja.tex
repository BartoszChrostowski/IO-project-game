\documentclass[Dokumentacja.tex]{subfiles}

\begin{document}
\section{Komunikacja}
Komunikacja odbywa się za pośrednictwem protokołu TCP. Utrata połączenia z którymkolwiek modułem skutkuje w każdym z modułów
poinformowaniem użytkownika i zakończeniem działania. Wiadomości wysyłane są w formacie JSON.
Wiadomości wysyłane przez GM i Agenty opakowywane są w adapter opisujący kontekst wysyłanej wiadomości.
Pole \textit{agentID} uzupełniane jest przez serwer na podstawie. Po nawiązaniu połączenia przez Agenta z serwerem,
serwer nadaje mu unikane \textit{agentID} (liczbę całkowitą), które będzie służyło do korelacji oraz do będzie
wykorzystywane przez GM w logice gry. Te samo \textit{agentID} wysyłane jest do Agenta w odpowiedzi na prośbę o dołączenie
oraz w wiadomości o rozpoczęciu rozgrywki.

\lstinputlisting[language=json]{./DefinicjeWiadomosci/messageWrapper.json}

\subsection{Wiadomości Agenta}
\subsubsection{Zapytanie czy trzymany fragment jest fikcyjny}
\textit{Payload} pusty
\lstinputlisting[language=json]{./DefinicjeWiadomosci/AgentMes/checkForScham.json}

\subsubsection{Zapytanie o zniszczenie fragmentu}
\textit{Payload} pusty
\lstinputlisting[language=json]{./DefinicjeWiadomosci/AgentMes/destroyPiece.json}

\subsubsection{Zapytanie zapytanie o akcję odkrycia}
\textit{Payload} pusty
\lstinputlisting[language=json]{./DefinicjeWiadomosci/AgentMes/discovery.json}

\subsubsection{Odpowiedź na wymianę informacji}
\lstinputlisting[language=json]{./DefinicjeWiadomosci/AgentMes/infomationExchangeRespond.json}

\subsubsection{Zapytanie o wymianę informacji}
\lstinputlisting[language=json]{./DefinicjeWiadomosci/AgentMes/informationExchangeAsk.json}

\subsubsection{Zapytanie o dołączenie do rozgrywki}
\lstinputlisting[language=json]{./DefinicjeWiadomosci/AgentMes/joinGame.json}

\subsubsection{Zapytanie o ruch}
\lstinputlisting[language=json]{./DefinicjeWiadomosci/AgentMes/makeMove.json}

\subsubsection{Zapytanie o podniesienie fragmentu}
\textit{Payload} pusty
\lstinputlisting[language=json]{./DefinicjeWiadomosci/AgentMes/pickPiece.json}

\subsubsection{Zapytanie o położnei fragmentu}
\textit{Payload} pusty
\lstinputlisting[language=json]{./DefinicjeWiadomosci/AgentMes/putPiece.json}


\subsection{Wiadomości GM}
\subsection{Odpowiedź na sprawdzenie fikcyjności}
\lstinputlisting[language=json]{./DefinicjeWiadomosci/GMMes/checkForSchamResponse.json}

\subsection{Odpowiedź na prośbę o zniszczenie fragmentu}
\lstinputlisting[language=json]{./DefinicjeWiadomosci/GMMes/destroyPieceResponse.json}

\subsection{Odpowiedź na akcję discovery}
\lstinputlisting[language=json]{./DefinicjeWiadomosci/GMMes/discoveryResponse.json}

\subsection{Wiadomość o zakończeniu gry}
\lstinputlisting[language=json]{./DefinicjeWiadomosci/GMMes/gameEnd.json}

\subsection{Wiadomość o rozpoczęciu gry}
\lstinputlisting[language=json]{./DefinicjeWiadomosci/GMMes/gameStart.json}

\subsection{Wiadomość przekazująca zapytanie o wymianę informacji do adresata}
\lstinputlisting[language=json]{./DefinicjeWiadomosci/GMMes/informationExchangeAskForward.json}

\subsection{Odpowiedź na zapytanie o dołączenie}
\lstinputlisting[language=json]{./DefinicjeWiadomosci/GMMes/joinGameResponse.json}

\subsection{Odpowiedź na zapytanie o ruch}
\lstinputlisting[language=json]{./DefinicjeWiadomosci/GMMes/makeMoveResponse.json}

\subsection{Odpowiedź na podniesienie kawałka}
\lstinputlisting[language=json]{./DefinicjeWiadomosci/GMMes/pickPieceResponse.json}

\subsection{Odpowiedź na położenie kawałka}
\lstinputlisting[language=json]{./DefinicjeWiadomosci/GMMes/putPieceResponse.json}

\subsection{Wiadomości błędów}

\subsection{Błędny ruch}
\lstinputlisting[language=json]{./DefinicjeWiadomosci/Errors/invalidMove.json}

\subsection{Błędne odłożenie kawałka}
\lstinputlisting[language=json]{./DefinicjeWiadomosci/Errors/pickPiece.json}

\subsection{Błędne położenie kawałka}
\lstinputlisting[language=json]{./DefinicjeWiadomosci/Errors/putPieceError.json}

\subsection{Nie odczekanie kary}
\lstinputlisting[language=json]{./DefinicjeWiadomosci/Errors/timePenaltyError.json}

\subsection{Niezdefiniowany błąd}
\lstinputlisting[language=json]{./DefinicjeWiadomosci/Errors/undefinedErrorMessage.json}





\end{document}
